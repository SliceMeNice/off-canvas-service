this.SliceMeNice=this.SliceMeNice||{},this.SliceMeNice.OffCanvas=function(e){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(t,e),t.prototype.activateView=function(e){var t=e.element.style;t.display="block",t.height="",t.left="",t.minHeight=window.innerHeight+"px",t.minWidth=Math.min(window.innerWidth,document.body.offsetWidth)+"px",t.overflow="",t.position="",t.top="",t.width=""},t.prototype.changeView=function(e,t,i,n){var r=this,o=t.element.scrollLeft,s=t.element.scrollTop,a=document.body.scrollLeft||document.documentElement&&document.documentElement.scrollLeft||0,c=document.body.scrollTop||document.documentElement&&document.documentElement.scrollTop||0;this.fixateView(e),e.element.scrollLeft=a,e.element.scrollTop=c;var h=new Array;function l(e){r.transitionCallbacks.hasOwnProperty(e)&&(h=h.concat(r.transitionCallbacks[e]))}if(!1===i)l(e.id+"-"+t.id),l("*-"+t.id),l(e.id+"-*");else{var w=this.viewStack[this.viewStack.length-2];l(e.id+"-"+t.id),h.length||(l(e.id+"-"+w.id),l(e.id+"-*"),l(w.id+"-"+t.id),l("*-"+t.id))}var u=[e,t],p=new Array;function d(){h.forEach(function(e){e.skipOrCleanupCallback&&e.skipOrCleanupCallback.apply(r,u)}),t.element.scrollLeft=0,t.element.scrollTop=0,r.activateView(t),window.scrollTo(o,s)}return!1===n&&h.forEach(function(e){p.push(e.transitionCallback.apply(r,u))}),new Promise(function(e,t){p.length?Promise.all(p).then(function(){d(),e()}):(d(),e())})},t.prototype.fixateView=function(e){var t=e.element.style;t.height=window.innerHeight+"px",t.left="0",t.minHeight=window.innerHeight+"px",t.minWidth=Math.min(window.innerWidth,document.body.offsetWidth)+"px",t.overflow="hidden",t.position="fixed",t.top="0",t.width=Math.min(window.innerWidth,document.body.offsetWidth)+"px"},t}(function(){function e(){this.registeredViews={},this.transitionCallbacks={},this.viewStack=new Array}return e.prototype.addTransitionCallback=function(e,t,i,n){var r=e+"-"+t;this.transitionCallbacks.hasOwnProperty(r)||(this.transitionCallbacks[r]=[]),this.transitionCallbacks[r].push({transitionCallback:i,skipOrCleanupCallback:n})},e.prototype.dismissCurrentView=function(e){if(void 0===e&&(e=!1),!this.viewStack.length)return Promise.resolve();var t=this.viewStack.pop(),i=this.viewStack[this.viewStack.length-1];return this.changeView(t,i,!1,e)},e.prototype.getNumberOfViewsOnViewstack=function(){return this.viewStack.length},e.prototype.getRegisteredViews=function(){var e=new Array;for(var t in this.registeredViews)e.push(this.registeredViews[t]);return e},e.prototype.isShowingView=function(t){return!!this.viewStack.length&&(t?this.viewStack.some(function(e){return e.id===t}):1<this.viewStack.length)},e.prototype.isTopmostView=function(e){return!!this.viewStack.length&&this.viewStack[this.viewStack.length-1].id===e},e.prototype.registerView=function(e,t){var i={id:e,element:t};return this.registeredViews[e]=i,this.fixateView(i),i},e.prototype.replaceCurrentViewWith=function(e,t){void 0===t&&(t=!1);var i=this.registeredViews[e];if(i){if(0<this.viewStack.length&&-1===this.viewStack.indexOf(i)){var n=this.viewStack.pop();return this.viewStack.push(i),this.changeView(n,i,!0,t)}return Promise.reject('The view "'+e+'" is already being shown.')}return Promise.reject('Unknown view "'+e+'".')},e.prototype.setBaseView=function(e){this.baseView=e,this.viewStack=[this.baseView],this.activateView(this.baseView)},e.prototype.showView=function(e,t){if(void 0===t&&(t=!1),this.baseView&&e===this.baseView.id)return Promise.resolve();var i=this.registeredViews[e];if(i){if(-1!==this.viewStack.indexOf(i))return Promise.reject('The view "'+e+'" is already being shown.');this.viewStack.push(i);var n=this.viewStack[this.viewStack.length-2],r=this.viewStack[this.viewStack.length-1];return this.changeView(n,r,!1,t)}return Promise.reject('Unknown view "'+e+'".')},e.prototype.unregisterView=function(e){delete this.registeredViews[e]},e}());return e.OffCanvasService=t,e}({});
